"use strict";(self.webpackChunkrushjs_io=self.webpackChunkrushjs_io||[]).push([[514],{158:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>_});var i=n(6393);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),u=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(s.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),c=a,_=d["".concat(s,".").concat(c)]||d[c]||h[c]||r;return n?i.createElement(_,o(o({ref:t},p),{},{components:n})):i.createElement(_,o({ref:t},p))}));function _(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5327:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>_,frontMatter:()=>l,metadata:()=>u,toc:()=>d});var i=n(9122),a=n(2501),r=(n(6393),n(158)),o=["components"],l={title:"Environment variables"},s=void 0,u={unversionedId:"pages/configs/environment_vars",id:"pages/configs/environment_vars",title:"Environment variables",description:"The Rush tool's behavior can be customized using the shell environment variables described below:",source:"@site/docs/pages/configs/environment_vars.md",sourceDirName:"pages/configs",slug:"/pages/configs/environment_vars",permalink:"/pages/configs/environment_vars",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/rushjs.io/docs/pages/configs/environment_vars.md",tags:[],version:"current",frontMatter:{title:"Environment variables"},sidebar:"docsSidebar",previous:{title:"rush version",permalink:"/pages/commands/rush_version"},next:{title:".npmrc",permalink:"/pages/configs/npmrc"}},p={},d=[{value:"RUSH_ABSOLUTE_SYMLINKS",id:"rush_absolute_symlinks",level:2},{value:"RUSH_ALLOW_UNSUPPORTED_NODEJS",id:"rush_allow_unsupported_nodejs",level:2},{value:"RUSH_ALLOW_WARNINGS_IN_SUCCESSFUL_BUILD",id:"rush_allow_warnings_in_successful_build",level:2},{value:"RUSH_BUILD_CACHE_CREDENTIAL",id:"rush_build_cache_credential",level:2},{value:"RUSH_BUILD_CACHE_ENABLED",id:"rush_build_cache_enabled",level:2},{value:"RUSH_BUILD_CACHE_WRITE_ALLOWED",id:"rush_build_cache_write_allowed",level:2},{value:"RUSH_COBUILD_CONTEXT_ID (EXPERIMENTAL)",id:"rush_cobuild_context_id-experimental",level:2},{value:"RUSH_COBUILD_LEAF_PROJECT_LOG_ONLY_ALLOWED (EXPERIMENTAL)",id:"rush_cobuild_leaf_project_log_only_allowed-experimental",level:2},{value:"RUSH_COBUILD_RUNNER_ID (EXPERIMENTAL)",id:"rush_cobuild_runner_id-experimental",level:2},{value:"RUSH_DEPLOY_TARGET_FOLDER",id:"rush_deploy_target_folder",level:2},{value:"RUSH_GIT_BINARY_PATH",id:"rush_git_binary_path",level:2},{value:"RUSH_TAR_BINARY_PATH",id:"rush_tar_binary_path",level:2},{value:"RUSH_GLOBAL_FOLDER",id:"rush_global_folder",level:2},{value:"RUSH_INVOKED_ARGS",id:"rush_invoked_args",level:2},{value:"RUSH_INVOKED_FOLDER",id:"rush_invoked_folder",level:2},{value:"RUSH_PARALLELISM",id:"rush_parallelism",level:2},{value:"RUSH_PNPM_STORE_PATH",id:"rush_pnpm_store_path",level:2},{value:"RUSH_PREVIEW_VERSION",id:"rush_preview_version",level:2},{value:"RUSH_TEMP_FOLDER",id:"rush_temp_folder",level:2},{value:"RUSH_VARIANT",id:"rush_variant",level:2},{value:"RUSH_PNPM_VERIFY_STORE_INTEGRITY",id:"rush_pnpm_verify_store_integrity",level:2}],h={toc:d},c="wrapper";function _(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)(c,(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Rush tool's behavior can be customized using the shell environment variables described below:"),(0,r.kt)("h2",{id:"rush_absolute_symlinks"},"RUSH_ABSOLUTE_SYMLINKS"),(0,r.kt)("p",null,"If this variable is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"1"),", Rush will create symlinks with absolute paths instead\nof relative paths. This can be necessary when a repository is moved during a build or\nif parts of a repository are moved into a sandbox."),(0,r.kt)("h2",{id:"rush_allow_unsupported_nodejs"},"RUSH_ALLOW_UNSUPPORTED_NODEJS"),(0,r.kt)("p",null,"If this variable is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"1"),", Rush will not fail the build when running a version\nof Node that does not match the criteria specified in the ",(0,r.kt)("inlineCode",{parentName:"p"},"nodeSupportedVersionRange"),"\nfield from ",(0,r.kt)("strong",{parentName:"p"},"rush.json"),"."),(0,r.kt)("h2",{id:"rush_allow_warnings_in_successful_build"},"RUSH_ALLOW_WARNINGS_IN_SUCCESSFUL_BUILD"),(0,r.kt)("p",null,"Setting this environment variable overrides the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"allowWarningsInSuccessfulBuild"),"\nin the ",(0,r.kt)("strong",{parentName:"p"},"command-line.json")," configuration file. Specify ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," to allow warnings in a successful build,\nor ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," to disallow them. (See the comments in the\n",(0,r.kt)("a",{parentName:"p",href:"/pages/configs/command-line_json"},"command-line.json"),"\nfile for more information)."),(0,r.kt)("h2",{id:"rush_build_cache_credential"},"RUSH_BUILD_CACHE_CREDENTIAL"),(0,r.kt)("p",null,"This environment variable is used by the\n",(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,r.kt)("p",null,"Provides a credential for accessing the remote build cache, if configured. This credential overrides\nany cached credentials."),(0,r.kt)("p",null,"Setting this environment variable overrides whatever credential has been saved in the\nlocal cloud cache credentials using ",(0,r.kt)("inlineCode",{parentName:"p"},"rush update-cloud-credentials"),"."),(0,r.kt)("p",null,"If Azure Blob Storage is used to store cache entries, this must be a SAS token serialized as query parameters.\nSee ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview"},"this article")," for details\nabout SAS tokens."),(0,r.kt)("h2",{id:"rush_build_cache_enabled"},"RUSH_BUILD_CACHE_ENABLED"),(0,r.kt)("p",null,"This environment variable is used by the\n",(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,r.kt)("p",null,"Setting this environment variable overrides the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"buildCacheEnabled")," in the\n",(0,r.kt)("a",{parentName:"p",href:"/pages/configs/build-cache_json"},"build-cache.json"),"\nconfiguration file. Specify ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," to enable the build cache or ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," to disable it."),(0,r.kt)("p",null,"If set to ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),", this is equivalent to passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"--disable-build-cache")," flag."),(0,r.kt)("p",null,"If there is no build cache configured, then this environment variable is ignored."),(0,r.kt)("h2",{id:"rush_build_cache_write_allowed"},"RUSH_BUILD_CACHE_WRITE_ALLOWED"),(0,r.kt)("p",null,"This environment variable is used by the\n",(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,r.kt)("p",null,"Overrides the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"isCacheWriteAllowed")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"build-cache.json")," configuration file. The value of this\nenvironment variable must be ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," (for true) or ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," (for false). If there is no build cache configured, then\nthis environment variable is ignored."),(0,r.kt)("h2",{id:"rush_cobuild_context_id-experimental"},"RUSH_COBUILD_CONTEXT_ID (EXPERIMENTAL)"),(0,r.kt)("p",null,"Cobuild pipelines must define this environment variable; without it, Rush will perform a regular build without\nany cobuild logic. See the ",(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/cobuilds"},"Cobuilds")," documentation for details."),(0,r.kt)("h2",{id:"rush_cobuild_leaf_project_log_only_allowed-experimental"},"RUSH_COBUILD_LEAF_PROJECT_LOG_ONLY_ALLOWED (EXPERIMENTAL)"),(0,r.kt)("p",null,'This is useful when you are using the cobuild feature but the Rush build cache is not able for\n"leaf" projects in the dependency graph. (For example, common libraries have build cache enabled,\nbut the apps the consume these libraries do now.) Normally, because we can\'t obtain such projects\nfrom the cache, all cobuild machines are forced to build that project. This is inefficient if our\ngoal is to validate whether the project builds successfully, not to deploy it.'),(0,r.kt)("p",null,"Setting ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_COBUILD_LEAF_PROJECT_LOG_ONLY_ALLOWED")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"1"),' will cause Rush to use a special\n"log files only" caching for leaf projects with build cache disabled. The log files are cached\nand will be displayed on other cobuild machines, but the project contents are cached or restored.\nSee the ',(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/cobuilds"},"Cobuilds")," documentation for details."),(0,r.kt)("h2",{id:"rush_cobuild_runner_id-experimental"},"RUSH_COBUILD_RUNNER_ID (EXPERIMENTAL)"),(0,r.kt)("p",null,"This environment variable to uniquely identifies each cobuild machine. If this variable is not defined,\nRush will generate a random identifier on each run.\nSee the ",(0,r.kt)("a",{parentName:"p",href:"/pages/maintainer/cobuilds"},"Cobuilds")," documentation for details."),(0,r.kt)("h2",{id:"rush_deploy_target_folder"},"RUSH_DEPLOY_TARGET_FOLDER"),(0,r.kt)("p",null,"This environment variable can be used to specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"--target-folder")," parameter\nfor the ",(0,r.kt)("a",{parentName:"p",href:"/pages/commands/rush_deploy"},"rush deploy")," command."),(0,r.kt)("h2",{id:"rush_git_binary_path"},"RUSH_GIT_BINARY_PATH"),(0,r.kt)("p",null,"Explicitly specifies the path for the Git binary that is invoked by certain Rush operations."),(0,r.kt)("h2",{id:"rush_tar_binary_path"},"RUSH_TAR_BINARY_PATH"),(0,r.kt)("p",null,"Explicitly specifies the path for the ",(0,r.kt)("inlineCode",{parentName:"p"},"tar")," binary that is invoked by certain Rush operations."),(0,r.kt)("h2",{id:"rush_global_folder"},"RUSH_GLOBAL_FOLDER"),(0,r.kt)("p",null,"Overrides the location of the ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.rush")," global folder where Rush stores temporary files."),(0,r.kt)("p",null,"Most of the temporary files created by Rush are stored separately for each monorepo working folder,\nto avoid issues of concurrency and compatibility between tool versions. However, a small set\nof files (e.g. installations of the ",(0,r.kt)("inlineCode",{parentName:"p"},"@microsoft/rush-lib")," engine and the package manager) are stored\nin a global folder to speed up installations. The default location is ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.rush")," on POSIX-like\noperating systems or ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\YourName")," on Windows."),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_GLOBAL_FOLDER")," to specify a different folder path. This is useful for example if a Windows\ngroup policy forbids executing scripts installed in a user's home directory."),(0,r.kt)("p",null,"(POSIX is a registered trademark of the Institute of Electrical and Electronic Engineers, Inc.)"),(0,r.kt)("h2",{id:"rush_invoked_args"},"RUSH_INVOKED_ARGS"),(0,r.kt)("p",null,"When running a hook script, this environment variable communicates the original arguments\npassed to the ",(0,r.kt)("inlineCode",{parentName:"p"},"rush")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"rushx")," command."),(0,r.kt)("p",null,"Unlike ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_FOLDER"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_ARGS")," variable is only available for hook scripts.\nOther lifecycle scripts should not make assumptions about Rush's command line syntax\nif Rush did not explicitly pass along command-line parameters to their process."),(0,r.kt)("h2",{id:"rush_invoked_folder"},"RUSH_INVOKED_FOLDER"),(0,r.kt)("p",null,"When Rush executes shell scripts, it sometimes changes the working directory to be a project folder or\nthe repository root folder. The original working directory (where the Rush command was invoked) is assigned\nto the the child process's ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_FOLDER")," environment variable, in case it is needed by the script."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_FOLDER")," variable is the same idea as the ",(0,r.kt)("inlineCode",{parentName:"p"},"INIT_CWD")," variable that package managers\nassign when they execute lifecycle scripts."),(0,r.kt)("h2",{id:"rush_parallelism"},"RUSH_PARALLELISM"),(0,r.kt)("p",null,"Specifies the maximum number of concurrent processes to launch during a build.\nFor more information, see the command-line help for the ",(0,r.kt)("inlineCode",{parentName:"p"},"--parallelism")," parameter for\n",(0,r.kt)("a",{parentName:"p",href:"/pages/commands/rush_build"},"rush build"),"."),(0,r.kt)("h2",{id:"rush_pnpm_store_path"},"RUSH_PNPM_STORE_PATH"),(0,r.kt)("p",null,"When using PNPM as the package manager, this variable can be used to configure the path that\nPNPM will use as the store directory."),(0,r.kt)("p",null,"If a relative path is used, then the store path will be resolved relative to the process's\ncurrent working directory. An absolute path is recommended."),(0,r.kt)("h2",{id:"rush_preview_version"},"RUSH_PREVIEW_VERSION"),(0,r.kt)("p",null,"This variable overrides the version of Rush that will be installed by\nthe version selector. The default value is determined by the ",(0,r.kt)("inlineCode",{parentName:"p"},"rushVersion"),"\nfield from ",(0,r.kt)("strong",{parentName:"p"},"rush.json"),"."),(0,r.kt)("p",null,"For example, if you want to try out a different release of Rush before upgrading your repo, you can assign\nthe variable like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# This is Bash\'s syntax; for Windows shell, change "export" to be "set"\nexport RUSH_PREVIEW_VERSION=5.0.0-dev.25\n\nrush install\n')),(0,r.kt)("h2",{id:"rush_temp_folder"},"RUSH_TEMP_FOLDER"),(0,r.kt)("p",null,"This variable overrides the temporary folder used by Rush.\nThe default value is ",(0,r.kt)("strong",{parentName:"p"},"common/temp")," under the repository root."),(0,r.kt)("p",null,"This environment variable is not compatible with workspace installs (",(0,r.kt)("inlineCode",{parentName:"p"},"useWorkspaces")," = true).\nIf attempting to move the PNPM store path, see the ",(0,r.kt)("inlineCode",{parentName:"p"},"RUSH_PNPM_STORE_PATH")," environment variable."),(0,r.kt)("h2",{id:"rush_variant"},"RUSH_VARIANT"),(0,r.kt)("p",null,"This variable selects a specific installation variant for Rush to use when installing\nand linking package dependencies."),(0,r.kt)("p",null,"For more information about this feature, see\n",(0,r.kt)("a",{parentName:"p",href:"/pages/advanced/installation_variants"},"Installation Variants"),"."),(0,r.kt)("h2",{id:"rush_pnpm_verify_store_integrity"},"RUSH_PNPM_VERIFY_STORE_INTEGRITY"),(0,r.kt)("p",null,"When using PNPM as the package manager, this variable can be used to control whether or not PNPM\nvalidates the integrity of the PNPM store during installation. The value of this environment variable must be\n",(0,r.kt)("inlineCode",{parentName:"p"},"1")," (for true) or ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," (for false). If not specified, defaults to the value in ",(0,r.kt)("strong",{parentName:"p"},".npmrc"),"."))}_.isMDXComponent=!0}}]);