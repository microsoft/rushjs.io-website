"use strict";(self.webpackChunkrushjs_io=self.webpackChunkrushjs_io||[]).push([[514],{158:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(6393);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=p(n),c=i,m=h["".concat(s,".").concat(c)]||h[c]||d[c]||a;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5327:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>h});var r=n(9122),i=n(2501),a=(n(6393),n(158)),o=["components"],l={title:"Environment variables"},s=void 0,p={unversionedId:"pages/configs/environment_vars",id:"pages/configs/environment_vars",title:"Environment variables",description:"The Rush tool's behavior can be customized using the shell environment variables described below:",source:"@site/docs/pages/configs/environment_vars.md",sourceDirName:"pages/configs",slug:"/pages/configs/environment_vars",permalink:"/pages/configs/environment_vars",draft:!1,editUrl:"https://github.com/microsoft/rushstack-websites/tree/main/websites/rushjs.io/docs/pages/configs/environment_vars.md",tags:[],version:"current",frontMatter:{title:"Environment variables"},sidebar:"docsSidebar",previous:{title:"rush version",permalink:"/pages/commands/rush_version"},next:{title:".npmrc",permalink:"/pages/configs/npmrc"}},u={},h=[{value:"RUSH_ABSOLUTE_SYMLINKS",id:"rush_absolute_symlinks",level:2},{value:"RUSH_ALLOW_UNSUPPORTED_NODEJS",id:"rush_allow_unsupported_nodejs",level:2},{value:"RUSH_ALLOW_WARNINGS_IN_SUCCESSFUL_BUILD",id:"rush_allow_warnings_in_successful_build",level:2},{value:"RUSH_BUILD_CACHE_CREDENTIAL (EXPERIMENTAL)",id:"rush_build_cache_credential-experimental",level:2},{value:"RUSH_BUILD_CACHE_ENABLED (EXPERIMENTAL)",id:"rush_build_cache_enabled-experimental",level:2},{value:"RUSH_BUILD_CACHE_WRITE_ALLOWED (EXPERIMENTAL)",id:"rush_build_cache_write_allowed-experimental",level:2},{value:"RUSH_DEPLOY_TARGET_FOLDER",id:"rush_deploy_target_folder",level:2},{value:"RUSH_GIT_BINARY_PATH",id:"rush_git_binary_path",level:2},{value:"RUSH_TAR_BINARY_PATH",id:"rush_tar_binary_path",level:2},{value:"RUSH_GLOBAL_FOLDER",id:"rush_global_folder",level:2},{value:"RUSH_INVOKED_FOLDER",id:"rush_invoked_folder",level:2},{value:"RUSH_PARALLELISM",id:"rush_parallelism",level:2},{value:"RUSH_PNPM_STORE_PATH",id:"rush_pnpm_store_path",level:2},{value:"RUSH_PREVIEW_VERSION",id:"rush_preview_version",level:2},{value:"RUSH_TEMP_FOLDER",id:"rush_temp_folder",level:2},{value:"RUSH_VARIANT",id:"rush_variant",level:2}],d={toc:h},c="wrapper";function m(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The Rush tool's behavior can be customized using the shell environment variables described below:"),(0,a.kt)("h2",{id:"rush_absolute_symlinks"},"RUSH_ABSOLUTE_SYMLINKS"),(0,a.kt)("p",null,"If this variable is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),", Rush will create symlinks with absolute paths instead\nof relative paths. This can be necessary when a repository is moved during a build or\nif parts of a repository are moved into a sandbox."),(0,a.kt)("h2",{id:"rush_allow_unsupported_nodejs"},"RUSH_ALLOW_UNSUPPORTED_NODEJS"),(0,a.kt)("p",null,"If this variable is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),", Rush will not fail the build when running a version\nof Node that does not match the criteria specified in the ",(0,a.kt)("inlineCode",{parentName:"p"},"nodeSupportedVersionRange"),"\nfield from ",(0,a.kt)("strong",{parentName:"p"},"rush.json"),"."),(0,a.kt)("h2",{id:"rush_allow_warnings_in_successful_build"},"RUSH_ALLOW_WARNINGS_IN_SUCCESSFUL_BUILD"),(0,a.kt)("p",null,"Setting this environment variable overrides the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"allowWarningsInSuccessfulBuild"),"\nin the ",(0,a.kt)("strong",{parentName:"p"},"command-line.json")," configuration file. Specify ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," to allow warnings in a successful build,\nor ",(0,a.kt)("inlineCode",{parentName:"p"},"0")," to disallow them. (See the comments in the\n",(0,a.kt)("a",{parentName:"p",href:"/pages/configs/command-line_json"},"command-line.json"),"\nfile for more information)."),(0,a.kt)("h2",{id:"rush_build_cache_credential-experimental"},"RUSH_BUILD_CACHE_CREDENTIAL (EXPERIMENTAL)"),(0,a.kt)("p",null,"This environment variable is used by the experimental\n",(0,a.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,a.kt)("p",null,"Provides a credential for accessing the remote build cache, if configured. This credential overrides\nany cached credentials."),(0,a.kt)("p",null,"Setting this environment variable overrides whatever credential has been saved in the\nlocal cloud cache credentials using ",(0,a.kt)("inlineCode",{parentName:"p"},"rush update-cloud-credentials"),"."),(0,a.kt)("p",null,"If Azure Blob Storage is used to store cache entries, this must be a SAS token serialized as query parameters.\nSee ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview"},"this article")," for details\nabout SAS tokens."),(0,a.kt)("h2",{id:"rush_build_cache_enabled-experimental"},"RUSH_BUILD_CACHE_ENABLED (EXPERIMENTAL)"),(0,a.kt)("p",null,"This environment variable is used by the experimental\n",(0,a.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,a.kt)("p",null,"Setting this environment variable overrides the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"buildCacheEnabled")," in the\n",(0,a.kt)("a",{parentName:"p",href:"/pages/configs/build-cache_json"},"build-cache.json"),"\nconfiguration file. Specify ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," to enable the build cache or ",(0,a.kt)("inlineCode",{parentName:"p"},"0")," to disable it."),(0,a.kt)("p",null,"If set to ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),", this is equivalent to passing the ",(0,a.kt)("inlineCode",{parentName:"p"},"--disable-build-cache")," flag."),(0,a.kt)("p",null,"If there is no build cache configured, then this environment variable is ignored."),(0,a.kt)("h2",{id:"rush_build_cache_write_allowed-experimental"},"RUSH_BUILD_CACHE_WRITE_ALLOWED (EXPERIMENTAL)"),(0,a.kt)("p",null,"This environment variable is used by the experimental\n",(0,a.kt)("a",{parentName:"p",href:"/pages/maintainer/build_cache"},"build cache"),"\nfeature."),(0,a.kt)("p",null,"Overrides the value of ",(0,a.kt)("inlineCode",{parentName:"p"},"isCacheWriteAllowed")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"build-cache.json")," configuration file. The value of this\nenvironment variable must be ",(0,a.kt)("inlineCode",{parentName:"p"},"1")," (for true) or ",(0,a.kt)("inlineCode",{parentName:"p"},"0")," (for false). If there is no build cache configured, then\nthis environment variable is ignored."),(0,a.kt)("h2",{id:"rush_deploy_target_folder"},"RUSH_DEPLOY_TARGET_FOLDER"),(0,a.kt)("p",null,"This environment variable can be used to specify the ",(0,a.kt)("inlineCode",{parentName:"p"},"--target-folder")," parameter\nfor the ",(0,a.kt)("a",{parentName:"p",href:"/pages/commands/rush_deploy"},"rush deploy")," command."),(0,a.kt)("h2",{id:"rush_git_binary_path"},"RUSH_GIT_BINARY_PATH"),(0,a.kt)("p",null,"Explicitly specifies the path for the Git binary that is invoked by certain Rush operations."),(0,a.kt)("h2",{id:"rush_tar_binary_path"},"RUSH_TAR_BINARY_PATH"),(0,a.kt)("p",null,"Explicitly specifies the path for the ",(0,a.kt)("inlineCode",{parentName:"p"},"tar")," binary that is invoked by certain Rush operations."),(0,a.kt)("h2",{id:"rush_global_folder"},"RUSH_GLOBAL_FOLDER"),(0,a.kt)("p",null,"Overrides the location of the ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.rush")," global folder where Rush stores temporary files."),(0,a.kt)("p",null,"Most of the temporary files created by Rush are stored separately for each monorepo working folder,\nto avoid issues of concurrency and compatibility between tool versions. However, a small set\nof files (e.g. installations of the ",(0,a.kt)("inlineCode",{parentName:"p"},"@microsoft/rush-lib")," engine and the package manager) are stored\nin a global folder to speed up installations. The default location is ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.rush")," on POSIX-like\noperating systems or ",(0,a.kt)("inlineCode",{parentName:"p"},"C:\\Users\\YourName")," on Windows."),(0,a.kt)("p",null,"Use ",(0,a.kt)("inlineCode",{parentName:"p"},"RUSH_GLOBAL_FOLDER")," to specify a different folder path. This is useful for example if a Windows\ngroup policy forbids executing scripts installed in a user's home directory."),(0,a.kt)("p",null,"(POSIX is a registered trademark of the Institute of Electrical and Electronic Engineers, Inc.)"),(0,a.kt)("h2",{id:"rush_invoked_folder"},"RUSH_INVOKED_FOLDER"),(0,a.kt)("p",null,"When Rush executes shell scripts, it sometimes changes the working directory to be a project folder or\nthe repository root folder. The original working directory (where the Rush command was invoked) is assigned\nto the the child process's ",(0,a.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_FOLDER")," environment variable, in case it is needed by the script."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"RUSH_INVOKED_FOLDER")," variable is the same idea as the ",(0,a.kt)("inlineCode",{parentName:"p"},"INIT_CWD")," variable that package managers\nassign when they execute lifecycle scripts."),(0,a.kt)("h2",{id:"rush_parallelism"},"RUSH_PARALLELISM"),(0,a.kt)("p",null,"Specifies the maximum number of concurrent processes to launch during a build.\nFor more information, see the command-line help for the ",(0,a.kt)("inlineCode",{parentName:"p"},"--parallelism")," parameter for\n",(0,a.kt)("a",{parentName:"p",href:"/pages/commands/rush_build"},"rush build"),"."),(0,a.kt)("h2",{id:"rush_pnpm_store_path"},"RUSH_PNPM_STORE_PATH"),(0,a.kt)("p",null,"When using PNPM as the package manager, this variable can be used to configure the path that\nPNPM will use as the store directory."),(0,a.kt)("p",null,"If a relative path is used, then the store path will be resolved relative to the process's\ncurrent working directory. An absolute path is recommended."),(0,a.kt)("h2",{id:"rush_preview_version"},"RUSH_PREVIEW_VERSION"),(0,a.kt)("p",null,"This variable overrides the version of Rush that will be installed by\nthe version selector. The default value is determined by the ",(0,a.kt)("inlineCode",{parentName:"p"},"rushVersion"),"\nfield from ",(0,a.kt)("strong",{parentName:"p"},"rush.json"),"."),(0,a.kt)("p",null,"For example, if you want to try out a different release of Rush before upgrading your repo, you can assign\nthe variable like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# This is Bash\'s syntax; for Windows shell, change "export" to be "set"\nexport RUSH_PREVIEW_VERSION=5.0.0-dev.25\n\nrush install\n')),(0,a.kt)("h2",{id:"rush_temp_folder"},"RUSH_TEMP_FOLDER"),(0,a.kt)("p",null,"This variable overrides the temporary folder used by Rush.\nThe default value is ",(0,a.kt)("strong",{parentName:"p"},"common/temp")," under the repository root."),(0,a.kt)("p",null,"This environment variable is not compatible with workspace installs (",(0,a.kt)("inlineCode",{parentName:"p"},"useWorkspaces")," = true).\nIf attempting to move the PNPM store path, see the ",(0,a.kt)("inlineCode",{parentName:"p"},"RUSH_PNPM_STORE_PATH")," environment variable."),(0,a.kt)("h2",{id:"rush_variant"},"RUSH_VARIANT"),(0,a.kt)("p",null,"This variable selects a specific installation variant for Rush to use when installing\nand linking package dependencies."),(0,a.kt)("p",null,"For more information about this feature, see\n",(0,a.kt)("a",{parentName:"p",href:"/pages/advanced/installation_variants"},"Installation Variants"),"."))}m.isMDXComponent=!0}}]);