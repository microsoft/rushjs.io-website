<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pages/maintainer/build_cache">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Enabling the build cache | Rush</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rushjs.io/images/site/rush-ograph.jpg"><meta data-rh="true" name="twitter:image" content="https://rushjs.io/images/site/rush-ograph.jpg"><meta data-rh="true" property="og:url" content="https://rushjs.io/pages/maintainer/build_cache/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Enabling the build cache | Rush"><meta data-rh="true" name="description" content="Rush has always supported an incremental analyzer that"><meta data-rh="true" property="og:description" content="Rush has always supported an incremental analyzer that"><link data-rh="true" rel="icon" href="/images/site/favicon.ico"><link data-rh="true" rel="canonical" href="https://rushjs.io/pages/maintainer/build_cache/"><link data-rh="true" rel="alternate" href="https://rushjs.io/pages/maintainer/build_cache/" hreflang="en"><link data-rh="true" rel="alternate" href="https://rushjs.io/zh-cn/pages/maintainer/build_cache/" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://rushjs.io/pages/maintainer/build_cache/" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Rush" href="/opensearch.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"><link rel="stylesheet" href="/assets/css/styles.33650549.css">
<link rel="preload" href="/assets/js/runtime~main.e4439f78.js" as="script">
<link rel="preload" href="/assets/js/main.72ed778c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="suiteNavBar_rHPh"><div role="button" class="waffle_FRnN waffleInteraction_uHqh"><img src="/images/suitenav/rs-waffle.svg"></div><div class="waffleDivider_XicE"></div><a href="https://rushstack.io/" class="suiteNavItem_tL2w">Rush Stack</a><a href="https://rushstack.io/pages/shop/" class="suiteNavItem_tL2w">Shop</a><a href="https://rushstack.io/blog/" class="suiteNavItem_tL2w">Blog</a><a href="https://rushstack.io/community/events/" class="suiteNavItem_tL2w">Events</a></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_sQ89" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/rush-horiz.svg" alt="Rush" class="themedImage_SmPy themedImage--light_jc2g"><img src="/images/rush-horiz.svg" alt="Rush" class="themedImage_SmPy themedImage--dark_D6nB"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_eEuM"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/pages/maintainer/build_cache/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-cn/pages/maintainer/build_cache/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pages/intro/welcome/">Docs</a><a class="navbar__item navbar__link" href="/pages/news/">News</a><a class="navbar__item navbar__link" href="/pages/extensibility/api/">API</a><a class="navbar__item navbar__link" href="/pages/contributing/">GitHub</a><a class="navbar__item navbar__link" href="/pages/help/support/">Help</a><div class="toggle_YEEi colorModeToggle_Qcvc"><button class="clean-btn toggleButton_uXQK toggleButtonDisabled_SXkB" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_MSFV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Y1Uk"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_wgNs"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_A0IM docsWrapper_kGXj"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_lVE9" type="button"></button><div class="docPage_ulef"><aside class="theme-doc-sidebar-container docSidebarContainer_APyL"><div class="sidebarViewport_Ic2x"><div class="sidebar_IuMp"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_lHqR"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/welcome/">Welcome to Rush!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/why_mono/">Why one big repo⁈</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/intro/get_started/">Getting started</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Developer tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/new_developer/">Getting started as a developer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/everyday_commands/">Everyday commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/modifying_package_json/">Modifying package.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/other_commands/">Other helpful commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/tab_completion/">Configuring tab completion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/selecting_subsets/">Selecting subsets of projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/developer/project_tags/">Using project tags</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Maintainer tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/setup_new_repo/">Setting up a new repo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/add_to_repo/">Adding projects to a repo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/enabling_ci_builds/">Enabling CI builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/recommended_settings/">Recommended settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/package_managers/">NPM vs PNPM vs Yarn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/setup_policies/">Enabling policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/git_hooks/">Installing Git hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/enabling_prettier/">Enabling Prettier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/custom_commands/">Custom commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/autoinstallers/">Autoinstallers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/using_rush_plugins/">Using Rush plugins (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/publishing/">Publishing packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/deploying/">Deploying projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pages/maintainer/build_cache/">Enabling the build cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/phased_builds/">Enabling phased builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/cobuilds/">Cobuilds (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/npm_registry_auth/">NPM registry authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/maintainer/custom_tips/">Custom tips (experimental)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Best practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/best_practices/change_logs/">Authoring change logs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced topics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/rush_files_and_folders/">Rush files and folders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/phantom_deps/">Phantom dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/npm_doppelgangers/">NPM doppelgangers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/compatibility_db/">PNPM Compatibility DB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/preferred_versions/">Preferred versions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/incremental_builds/">Incremental builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/watch_mode/">Using watch mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/advanced/installation_variants/">Installation variants</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Extensibility</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/extensibility/creating_plugins/">Creating Rush plugins (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/extensibility/api/">The &quot;rush-lib&quot; API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Command reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rushx/">rushx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush-pnpm/">rush-pnpm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_add/">rush add</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_build/">rush build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_change/">rush change</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_check/">rush check</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_deploy/">rush deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_init/">rush init</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_init-autoinstaller/">rush init-autoinstaller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_init-deploy/">rush init-deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_install/">rush install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_link/">rush link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_list/">rush list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_publish/">rush publish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_purge/">rush purge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_rebuild/">rush rebuild</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_remove/">rush remove</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_scan/">rush scan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_setup/">rush setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_tab-complete/">rush tab-complete</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_unlink/">rush unlink</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_update/">rush update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_update-autoinstaller/">rush update-autoinstaller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_update-cloud-credentials/">rush update-cloud-credentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_upgrade-interactive/">rush upgrade-interactive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/commands/rush_version/">rush version</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Config reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/environment_vars/">Environment variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/npmrc/">.npmrc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/npmrc-publish/">.npmrc-publish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/pnpmfile_cjs/">.pnpmfile.cjs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/artifactory_json/">artifactory.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/build-cache_json/">build-cache.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/cobuild_json/">cobuild.json (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/command-line_json/">command-line.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/common-versions_json/">common-versions.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/custom-tips_json/">custom-tips.json (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/deploy_json/">deploy.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/experiments_json/">experiments.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/pnpm-config_json/">pnpm-config.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/rush_json/">rush.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/rush-plugin-manifest_json/">rush-plugin-manifest.json (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/rush-plugins_json/">rush-plugins.json (experimental)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/rush-project_json/">rush-project.json</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/configs/version-policies_json/">version-policies.json</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Help</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/help/support/">Getting support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pages/help/faq/">Frequently Asked Questions (FAQ)</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_BzXK"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_wG_o"><div class="docItemContainer_jqGH"><article><div class="tocCollapsible_Vels theme-doc-toc-mobile tocMobile_PauL"><button type="button" class="clean-btn tocCollapsibleButton_PIvq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Enabling the build cache</h1></header><p>Rush has always supported an <a href="/pages/advanced/incremental_builds/">incremental analyzer</a> that
enables <code>rush build</code> to skip projects whose input files have not changed since the last build. (This optimization
can also be used with custom commands by enabling the <code>incremental</code> flag in <strong>custom-commands.json</strong>.) However,
the build output is not saved anywhere, so generally a full rebuild is still required when switching to another branch.</p><p>Rush&#x27;s <strong>build cache</strong> improves on this by creating a tar archive of each project&#x27;s build outputs.
The archive is cached so that later, if <code>rush build</code> can find a match in the cache, it can extract the archive
instead of building that project. This can provide dramatic speedups, for example reducing a 30 minute build time
to 30 seconds. The cache key is a hash of the source files and NPM dependencies, following the
<a href="/pages/advanced/incremental_builds/">same basic rules</a> as the incremental analyzer.</p><p>The build cache archives are stored in two places:</p><ul><li><p><strong>In a cache folder on your local disk.</strong> This way you can switch between different branches without
losing your incremental build state. You can even configure a centralized folder to be shared between
multiple enlistments on your machine. The default location is <strong>common/temp/build-cache</strong>.</p></li><li><p><strong>In a cloud-hosted storage container. (Optional)</strong> In a typical setup, the CI system would be configured to write
to cloud storage, and individual users are granted read-only access. For example, each time a PR is merged into
the <code>main</code> branch, the CI system builds that baseline and uploads it to cloud storage. Even for a user who
is doing <code>git clone</code> for the first time, their <code>rush build</code> will be very fast.</p></li></ul><blockquote><p>Build caching is considered a replacement for build skipping, so once enabled, commands that support
incremental building will begin saving and restoring from the cache instead of the previous &quot;skipping&quot;
behavior. Projects that haven&#x27;t been configured for build caching, or intentionally disable build
caching, will continue to use the default build skipping behavior.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_abXo" id="enabling-the-local-disk-cache">Enabling the local disk cache<a href="#enabling-the-local-disk-cache" class="hash-link" aria-label="Direct link to Enabling the local disk cache" title="Direct link to Enabling the local disk cache">​</a></h2><p>The build cache feature is enabled using the <a href="/pages/configs/build-cache_json/">build-cache.json</a>
config file. You can copy the template from the website or use <code>rush init</code> to create this file.</p><p>To enable the basic local disk cache, add these two settings:</p><p><strong>common/config/rush/build-cache.json</strong></p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * (Required) EXPERIMENTAL - Set this to true to enable the build cache feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * See https://rushjs.io/pages/maintainer/build_cache/ for details about this experimental feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;buildCacheEnabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * (Required) Choose where project build outputs will be cached.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Possible values: &quot;local-only&quot;, &quot;azure-blob-storage&quot;, &quot;amazon-s3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;cacheProvider&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;local-only&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Upgrade note:</strong> Early releases of this feature were enabled using the <code>&quot;buildCache&quot;: true</code> setting
in <strong>experiments.json</strong>. This has been superseded by <code>&quot;buildCacheEnabled&quot;</code> in <strong>build-cache.json</strong>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_abXo" id="configuring-project-output-folders">Configuring project output folders<a href="#configuring-project-output-folders" class="hash-link" aria-label="Direct link to Configuring project output folders" title="Direct link to Configuring project output folders">​</a></h2><p>With only this change, if you run <code>rush rebuild --verbose</code>, you will see this warning:</p><div class="codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-text codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">Project does not have a rush-project.json configuration file, or one provided by a rig,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">so it does not support caching.</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The build cache needs to know which folders should be stored in the tar archive. Those details vary between
toolchains, and are thus configured separately for each project using the
<a href="/pages/configs/rush-project_json/">rush-project.json</a> config file.</p><p>For example:</p><p><strong>&lt;<!-- -->your-project<!-- -->&gt;<!-- -->/config/rush-project.json</strong></p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Specify the folders where your toolchain writes its output files.  If enabled, the Rush build cache will</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * restore these folders from the cache.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * The strings are folder names under the project root folder.  These folders should not be tracked by Git.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * They must not contain symlinks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;projectOutputFolderNames&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;lib&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dist&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s recommended to use a <a href="https://rushstack.io/pages/heft/rig_packages/" target="_blank" rel="noopener noreferrer">rig package</a> to avoid having
to copy this file into each project folder.</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="testing-the-build-cache">Testing the build cache<a href="#testing-the-build-cache" class="hash-link" aria-label="Direct link to Testing the build cache" title="Direct link to Testing the build cache">​</a></h2><p>Now you should see projects being cached as shown in this sample log output:</p><div class="language-bash codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-bash codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">rush build --verbose</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-text codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">. . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==[ example-project ]==============================================[ 1 of 5 ]==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This project was not found in the build cache.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Invoking: heft test --clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">. . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Caching build output folders: lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully set cache entry.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;example-project&quot; completed successfully in 11.27 seconds.</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When we run the same command a second time, Rush extracts the archive instead of invoking the build task:</p><div class="language-bash codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-bash codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">rush build --verbose</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-text codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">. . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==[ example-project ]==============================================[ 1 of 5 ]==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Build cache hit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Clearing cached folders: lib, dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully restored output from the build cache.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example-project was restored from the build cache.</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that <code>rush rebuild</code> will not read from cache, only <code>rush build</code> does. To disable writing from cache during <code>rush rebuild</code>,
set the <a href="/pages/configs/environment_vars/"><code>RUSH_BUILD_CACHE_WRITE_ALLOWED</code></a> environment variable to <code>0</code>.</p><p>By default, the cached tar archives are stored under your <strong>common/temp/build-cache</strong> folder
(and thus will be cleaned by <code>rush purge</code>). It is safe to delete these files.</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="enabling-cloud-storage">Enabling cloud storage<a href="#enabling-cloud-storage" class="hash-link" aria-label="Direct link to Enabling cloud storage" title="Direct link to Enabling cloud storage">​</a></h2><p>Currently the <code>cacheProvider</code> setting provides three choices:</p><ul><li><code>&quot;local-only&quot;</code>: no cloud storage; archives are only kept on a local disk folder</li><li><code>&quot;azure-blob-storage&quot;</code>: Microsoft Azure <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/" target="_blank" rel="noopener noreferrer">blob storage container</a></li><li><code>&quot;amazon-s3&quot;</code>: Amazon <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket.html" target="_blank" rel="noopener noreferrer">S3 bucket</a></li></ul><p>(The above providers are <a href="https://github.com/microsoft/rushstack/tree/main/rush-plugins" target="_blank" rel="noopener noreferrer">modeled as Rush plugins</a>.
Custom build cache storage providers can be implemented in the same way.)</p><p>As one example, here&#x27;s how to configure an Azure blob container:</p><p><strong>common/config/rush/build-cache.json</strong></p><div class="language-js codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-js codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * (Required) EXPERIMENTAL - Set this to true to enable the build cache feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * See https://rushjs.io/pages/maintainer/build_cache/ for details about this experimental feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;buildCacheEnabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * (Required) Choose where project build outputs will be cached.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Possible values: &quot;local-only&quot;, &quot;azure-blob-storage&quot;, &quot;amazon-s3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;cacheProvider&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;azure-blob-storage&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Use this configuration with &quot;cacheProvider&quot;=&quot;azure-blob-storage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;azureBlobStorageConfiguration&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * (Required) The name of the the Azure storage account to use for build cache.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;storageAccountName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;example&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * The name of the container in the Azure storage account to use for build cache.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;storageContainerName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-container&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * If set to true, allow writing to the cache. Defaults to false.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;isCacheWriteAllowed&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that we have set <code>&quot;isCacheWriteAllowed&quot;: false</code> to prevent regular users from writing to the container.
(Later, we will use an environment variable to override this for our CI job.)</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="user-authentication">User authentication<a href="#user-authentication" class="hash-link" aria-label="Direct link to User authentication" title="Direct link to User authentication">​</a></h2><p>If security is not a priority for your repo, you can simplify user setup by configuring your storage container
to allow unauthenticated anonymous access. The container is accessed via an HTTPS URL containing randomized
hashes which are difficult to guess without access to your Git repo. This provides rudimentary
<a href="https://en.wikipedia.org/wiki/Security_through_obscurity" target="_blank" rel="noopener noreferrer">security through obscurity</a>.</p><p>A more security-conscious organization however will prefer to require authentication even for read-only access.
Rush provides a <a href="/pages/commands/rush_update-cloud-credentials/">rush update-cloud-credentials</a>
command to make this easy for users to set up:</p><div class="language-bash codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-bash codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">rush update-cloud-credentials --interactive</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_wfCu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_iwbS"><pre tabindex="0" class="prism-code language-text codeBlock_P4EJ thin-scrollbar"><code class="codeBlockLines_armO"><span class="token-line" style="color:#393A34"><span class="token plain">Rush Multi-Project Build Tool 5.45.6 (unmanaged) - https://rushjs.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node.js version is 12.20.1 (LTS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting &quot;rush update-cloud-credentials&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ╔═════════════════════════════════════════════════════════════════════════╗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ║             To sign in, use a web browser to open the page              ║</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ║     https://microsoft.com/devicelogin and enter the code XAYBQEGRK      ║</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ║                            to authenticate.                             ║</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ╚═════════════════════════════════════════════════════════════════════════╝</span><br></span></code></pre><div class="buttonGroup_WJX8"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_A4mn" aria-hidden="true"><svg class="copyButtonIcon_zOh6" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_kaU6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The credentials are stored in the user&#x27;s home directory under <code>~/.rush-user/credentials.json</code>.</p><h2 class="anchor anchorWithStickyNavbar_abXo" id="ci-setup">CI setup<a href="#ci-setup" class="hash-link" aria-label="Direct link to CI setup" title="Direct link to CI setup">​</a></h2><p>In a typical configuration, users have read-only access and the cache is populated by an automation account;
for example, a CI job that builds your <code>main</code> branch after each PR is merged. In our example above, the
<code>&quot;isCacheWriteAllowed&quot;: false</code> setting is what prevents users from writing to the cache. The CI job can
override this by setting the <a href="/pages/configs/environment_vars/">RUSH_BUILD_CACHE_WRITE_ALLOWED</a>
environment variable, and by providing credentials for the CI environment in the
<a href="/pages/configs/environment_vars/">RUSH_BUILD_CACHE_CREDENTIAL</a> environment variable.</p><h3 class="anchor anchorWithStickyNavbar_abXo" id="credentials">Credentials<a href="#credentials" class="hash-link" aria-label="Direct link to Credentials" title="Direct link to Credentials">​</a></h3><h4 class="anchor anchorWithStickyNavbar_abXo" id="azure-storage">Azure Storage<a href="#azure-storage" class="hash-link" aria-label="Direct link to Azure Storage" title="Direct link to Azure Storage">​</a></h4><p>For Azure Blob Storage, <code>RUSH_BUILD_CACHE_CREDENTIAL</code> must be a SAS token serialized as query parameters.
See <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview" target="_blank" rel="noopener noreferrer">this article</a> for details
about SAS tokens. You can obtain a SAS token via the <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage?tabs=azure-portal" target="_blank" rel="noopener noreferrer">Settings &gt; Access keys</a>
page for your storage account.</p><h4 class="anchor anchorWithStickyNavbar_abXo" id="aws">AWS<a href="#aws" class="hash-link" aria-label="Direct link to AWS" title="Direct link to AWS">​</a></h4><p>For Amazon S3, <code>RUSH_BUILD_CACHE_CREDENTIAL</code> will be your AWS Access Key ID and AWS Secret Access Key separated by a colon,
such as: <code>&lt;AccessKeyID&gt;:&lt;SecretAccessKey&gt;</code>. You can also pass temporary session tokens required when assuming an IAM role: <code>&lt;AccessKeyID&gt;:&lt;SecretAccessKey&gt;:&lt;SessionToken&gt;</code>.</p><p>If <code>RUSH_BUILD_CACHE_CREDENTIAL</code> is not set, the build cache will attempt to read the environment vars <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, and <code>AWS_SESSION_TOKEN</code> that
are commonly set via the AWS CLI or other CI tooling. However, <code>RUSH_BUILD_CACHE_CREDENTIAL</code> will always take precedence if it exists.</p><blockquote><p>The build cache feature is still under development. Feedback is welcome!</p><p>Some relevant GitHub issues to follow:</p><ul><li><a href="https://github.com/microsoft/rushstack/issues/2393" target="_blank" rel="noopener noreferrer">Build cache feature #2393</a> - the original feature spec</li><li><a href="https://github.com/microsoft/rushstack/issues/2642" target="_blank" rel="noopener noreferrer">Build Cache: split apart RUSH_BUILD_CACHE_WRITE_CREDENTIAL #2642</a></li><li><a href="https://github.com/microsoft/rushstack/issues/2618" target="_blank" rel="noopener noreferrer">Allow project config to specify non-build-related files #2618</a></li><li><a href="https://github.com/microsoft/rushstack/issues/2622" target="_blank" rel="noopener noreferrer">&quot;tar&quot; exited with code 1 while attempting to create the cache entry #2622</a></li></ul></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/rushstack-websites/tree/main/websites/rushjs.io/docs/pages/maintainer/build_cache.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_DX5v" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_hn6L"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pages/maintainer/deploying/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deploying projects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pages/maintainer/phased_builds/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enabling phased builds</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_JkeW thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enabling-the-local-disk-cache" class="table-of-contents__link toc-highlight">Enabling the local disk cache</a></li><li><a href="#configuring-project-output-folders" class="table-of-contents__link toc-highlight">Configuring project output folders</a></li><li><a href="#testing-the-build-cache" class="table-of-contents__link toc-highlight">Testing the build cache</a></li><li><a href="#enabling-cloud-storage" class="table-of-contents__link toc-highlight">Enabling cloud storage</a></li><li><a href="#user-authentication" class="table-of-contents__link toc-highlight">User authentication</a></li><li><a href="#ci-setup" class="table-of-contents__link toc-highlight">CI setup</a><ul><li><a href="#credentials" class="table-of-contents__link toc-highlight">Credentials</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 Microsoft</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e4439f78.js"></script>
<script src="/assets/js/main.72ed778c.js"></script>
</body>
</html>